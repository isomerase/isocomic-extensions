(()=>{"use strict";var e={368:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateSource=t.metadata=void 0;const n=r(914),s=r(77);var l=r(596);Object.defineProperty(t,"metadata",{enumerable:!0,get:function(){return a(l).default}});const c="https://e-hentai.org",i=["doujinshi","imageset","non-h","misc","western","artistcg","manga","cosplay","gamecg","asianporn"],o={type:"SELECTLIST",key:"category",label:"category",entryValues:i,entryLabels:i},u={type:"SELECTLIST",key:"order",label:"order",entryValues:["latest","popular"],entryLabels:["latest","popular"]},h=["japanese","english","chinese","dutch","french","german","hungarian","italian","korean","polish","portuguese","russian","spanish","thai","vietnamese","n/a","other"],p={type:"SELECTLIST",key:"language",label:"language",entryValues:h,entryLabels:h};class g extends n.CreateSourceUtil{constructor(){super(...arguments),this.filterList=[u,o,p]}async fetchDOM(e,t){const r=await this.fetch(e,t),a=await r.text();if(a.startsWith("Your IP address"))throw new Error(a);return this.parser.parseFromString(a,"text/html")}async fetchSourceMangas(e,t){const r=t?.[u.key]??"latest",a=t?.[o.key]??"all",n=t?.[p.key]??"all";let s;return"popular"===r?s=`${c}/popular`:"all"!==a?s=`${c}/${a}/${e}`:(s=`${c}?page=${e-1}`,"all"!==n&&(s+=`&f_search=language:${n}`)),f(await this.fetchDOM(s))}async fetchSourceManga(e){const t=await this.fetchDOM(e,{headers:{cookie:"nw=1"},cache:"force-cache"}),r=(0,s.select)(t,{url:()=>e,title:"#gn",description:"#gj",thumbnailUrl:()=>(0,s.query)(t,"#gd1 div@style").match(/url\((.*)\)/)?.[1],tags:()=>(0,s.queryAll)(t,"#taglist div@id").map((e=>e.replace("td_","").replace("_"," ")))}),a=Date.parse((0,s.query)(t,".gdt2"));return r.chapters=(0,s.selectAll)(t,".ptt a",{url:"@href",title:"@text",updateAt:()=>a}).filter((e=>!"<>".includes(e.title))).reverse(),r}async fetchSourceChapter(e){const t=await this.fetchDOM(e,{cache:"force-cache"});return{url:e,title:(parseInt(new URL(e).searchParams.get("p")??"0")+1).toString(),pages:(0,s.queryAll)(t,"#gdt a@href")}}async fetchSourcePage(e){const t=await this.fetchDOM(e,{cache:"force-cache"});return{url:(0,s.query)(t,"#img@src"),type:"image"}}async fetchSourceSearchMangas(e,t){const r=`${c}/?page=${t-1}&f_search=${e}`;return f(await this.fetchDOM(r))}}function f(e){const t=(0,s.selectAll)(e,"table.itg td.glname",{url:"a@href",title:".glink",thumbnailUrl:e=>(0,s.query)(e.parentElement,".glthumb img@data-src")||(0,s.query)(e.parentElement,".glthumb img@src"),tags:e=>(0,s.queryAll)(e,".gt@title")}),r=(0,s.queryAll)(e,".ptt a").filter((e=>!"<>".includes(e)));return{mangas:t,totalPage:parseInt(r.length>0?r.at(-1):"1")}}t.CreateSource=g},914:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateSourceUtil=void 0,t.CreateSourceUtil=class{constructor(e){this.xfetch=e.xfetch,this.parser=e.domParser,this.prefs=e.prefs}async fetch(e,t){return this.xfetch(e,t)}async fetchDOM(e,t){const r=await this.fetch(e,t);let a=await r.text();const n=this.parser.parseFromString(a,"text/html"),s=n.createElement("base");return s.href=e,n.head.appendChild(s),n}}},77:(e,t)=>{function r(e,t){const r={};for(let n in t){const s=t[n];if(s instanceof Function)r[n]=s(e);else{if("string"!=typeof s)throw new Error(`Invalid rule: ${s}`);r[n]=a(e,s)}}return r}function a(e,t){const[r,a]=t.split("@"),s=r?e.querySelector(r):e;return s?n(s,a):""}function n(e,t){return t&&"text"!==t?"html"===t?e.innerHTML.trim()??"":t.startsWith("data-")?e.dataset[t.slice("data-".length)]??"":e.getAttribute(t)??"":e.innerText?.trim()??""}Object.defineProperty(t,"__esModule",{value:!0}),t.queryAll=t.query=t.selectAll=t.select=void 0,t.select=r,t.selectAll=function(e,t,a){return Array.from(e.querySelectorAll(t)).map((e=>r(e,a)))},t.query=a,t.queryAll=function(e,t){const[r,a]=t.split("@");return Array.from(e.querySelectorAll(r)).map((e=>n(e,a)))}},596:e=>{e.exports=JSON.parse('{"id":"ehentai","name":"E-Hentai","website":"https://e-hentai.org/","version":"0.0.1","language":"all","iconUrl":"https://raw.githubusercontent.com/tachiyomiorg/tachiyomi-extensions/master/src/all/ehentai/res/mipmap-xxhdpi/ic_launcher.png","baseUrl":"https://e-hentai.org"}')}},t={},r=function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,r),s.exports}(368);module.exports=r})();